<?php
header('Content-type: text/xml');

// ’È¯’¿®’¼Ô’ÈÖ’¹æ’¡§Twilio’¤«’¤é’¼è’ÆÀ’¤µ’¤ì’¤¿’ÅÅ’ÏÃ’ÈÖ’¹æ
$callerId = "815031540294";
// ’¼õ’¿®’¼Ô’ÈÖ’¹æ’¡§Twilio’¤Î’ÅÅ’ÏÃ’ÈÖ’¹æ’¤Ë’ÅÅ’ÏÃ’¤ò’¤«’¤±’¤¿’ºÝ’¤Ë’¼õ’¿®’¼Ô’¤È’¤·’¤ÆTwilio Client’Ì¾’¤ò’Àß’Äê’¡£’¡Ê’ÈÖ’¹æ’¤Ç’¤â’Ìä’Âê’¤Ê’¤¤’¡Ë
//’¤É’¤¦’¤â’°¸’Àè’¤¬’ÈÖ’¹æ’¤À’¤È’¥ë’¡¼’¥×’¸½’¾Ý’¤¬’µ¯’¤³’¤ë’¤³’¤È’¤¬’¤¢’¤ë’¤Î’¤ÇClent’Ì¾’¤Î’Êý’¤¬’Ìµ’Æñ’¡£
$number = "TC_BrowserPhone";


// ’¥¯’¥é’¥¤’¥¢’¥ó’¥È’¤«’¤é’¤Î’È¯’¿®’¤Î’¾ì’¹ç’¡§’²è’ÌÌ’¤«’¤é’Æþ’ÎÏ’¤µ’¤ì’¤¿’ÅÅ’ÏÃ’ÈÖ’¹æ’¤Î’¼è’ÆÀ
if (isset($_REQUEST['PhoneNumber'])) {
  $number = $_REQUEST['PhoneNumber'];
 }


// ’°¸’Àè’¤¬’ÈÖ’¹æ’¤«Client’Ì¾’¤«’¤ò’È½’ÊÌ’¤·’¡¢’È¯’¿®’Àè’¤ò’Àß’Äê’¤¹’¤ë’¡£
if (preg_match("/^[\d\+\-\(\) ]+$/", $number)) {
  $numberOrClient = "<Number>" . $number . "</Number>";
 } else {
  $numberOrClient = "<Client>" . $number . "</Client>";
 }


?>

<Response>
    <Say language="ja-jp">Twilio ’¤«’¤é’¤Þ’¤¿’¤Ø’ÅÅ’ÏÃ’¤ò’¤«’¤±’¤Þ’¤¹’¡£</Say>
    <Dial callerId="<?php echo $callerId ?>">
        <?php echo $numberOrClient ?>
    </Dial>
    <Say language="ja-jp">’ÄÌ’ÏÃ’¤¬’½ª’Î»’Ã×’¤·’¤Þ’¤·’¤¿’¡£</Say>
</Response>
